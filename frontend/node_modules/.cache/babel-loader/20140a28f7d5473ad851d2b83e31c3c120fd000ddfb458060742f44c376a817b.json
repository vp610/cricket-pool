{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useSelector}from'react-redux';import{useParams}from'react-router-dom';import{gradients}from'../../constants/constants';import{useAuth}from'../../contexts/AuthContext';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Loader=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center min-h-screen\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-3 h-10 w-10 text-gray-700\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-semibold text-gray-700\",children:\"Loading...\"})]});export const PoolPage=()=>{const{poolId}=useParams();const{user}=useAuth();const[standings,setStandings]=useState(null);// const [userSelection, setUserSelection] = useState<UserSelection | null>(null);\nconst[players,setPlayers]=useState([]);const[teams,setTeams]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const gradientIndex=useSelector(state=>state.color.gradientIndex);useEffect(()=>{const fetchPoolData=async()=>{if(!(user!==null&&user!==void 0&&user.id)){// setError(\"User ID is missing. Please log in again.\");\nreturn;}try{const standingsResponse=await axios.get(`${process.env.REACT_APP_API_URL}/api/pool/standings/${poolId}`);// const selectionResponse = await axios.get(`${process.env.REACT_APP_API_URL}/api/pool/user-selection/${user.id}/${poolId}`);\nconst standingsData=standingsResponse.data;setStandings(standingsData);const userStanding=standingsData.find(standing=>user.id===standing.user.authId);if(userStanding){setPlayers(userStanding.players);setTeams(userStanding.teams);}else{setPlayers([]);setTeams([]);}}catch(err){if(axios.isAxiosError(err)&&err.response){const errorData=err.response.data;setError(typeof errorData==='object'?JSON.stringify(errorData):errorData);}else{setError('Error fetching pool data');}}finally{setLoading(false);}};if(user){fetchPoolData();}},[poolId,user]);if(loading)return/*#__PURE__*/_jsx(Loader,{});if(error)return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});const getEmoji=index=>{switch(index){case 0:return'ðŸ¥‡';case 1:return'ðŸ¥ˆ';case 2:return'ðŸ¥‰';default:return'';}};return/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-800 mb-4\",children:\"Standings\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white shadow-md rounded-lg overflow-hidden\",children:[/*#__PURE__*/_jsx(\"thead\",{className:`bg-gradient-to-r ${gradients[gradientIndex]} text-white shadow-lg`,children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left text-sm font-semibold text-white-700\",children:\"Player\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left text-sm font-semibold text-white-700\",children:\"Points\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:standings===null||standings===void 0?void 0:standings.map((standing,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:`hover:bg-gray-100 transition-colors duration-200 slide-in`,children:[/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-4 border-b border-gray-200 flex items-center\",children:[index<3&&/*#__PURE__*/_jsx(\"span\",{className:\"animate-bounce mr-2\",children:getEmoji(index)}),/*#__PURE__*/_jsx(\"img\",{// src={user.image}\nalt:standing.user.username,className:\"w-8 h-8 rounded-full mr-2\"}),standing.user.username]}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 border-b border-gray-200\",children:standing.score})]},standing.user.id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-800 mb-4\",children:\"Your Selection\"}),players.length>0||teams.length>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800\",children:\"Teams\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"mb-4\",children:teams.map(teamObj=>/*#__PURE__*/_jsxs(\"li\",{className:\"py-2 px-4 border-b\",children:[teamObj.team.name,\" - \",teamObj.score,\" points\"]},teamObj.team.id))}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800\",children:\"Players\"}),/*#__PURE__*/_jsx(\"ul\",{children:players.map(playerObj=>/*#__PURE__*/_jsxs(\"li\",{className:\"py-2 px-4 border-b\",children:[playerObj.player.name,\" - \",playerObj.score,\" points\"]},playerObj.player.id))})]}):/*#__PURE__*/_jsx(\"div\",{children:\"No selection found\"})]})]})});};","map":{"version":3,"names":["React","useEffect","useState","useSelector","useParams","gradients","useAuth","axios","jsx","_jsx","jsxs","_jsxs","Loader","className","children","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d","PoolPage","poolId","user","standings","setStandings","players","setPlayers","teams","setTeams","loading","setLoading","error","setError","gradientIndex","state","color","fetchPoolData","id","standingsResponse","get","process","env","REACT_APP_API_URL","standingsData","data","userStanding","find","standing","authId","err","isAxiosError","response","errorData","JSON","stringify","getEmoji","index","map","alt","username","score","length","teamObj","team","name","playerObj","player"],"sources":["/Users/Vaidik/Desktop/fantasyPool/frontend/src/components/Pool/PoolPage.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { Player, Team, User, PlayerStats, TeamStats, StandingTeam, StandingPlayer } from '../../types';\nimport { useAuth0 } from '@auth0/auth0-react';\nimport { RootState } from '../../store/store';\nimport { gradients } from '../../constants/constants';\nimport { useAuth } from '../../contexts/AuthContext';\nimport axios from 'axios';\n\ntype Standing = {\n  user: User;\n  score: number;\n  players: StandingPlayer[];\n  teams: StandingTeam[];\n};\n\nconst Loader: React.FC = () => (\n  <div className=\"flex flex-col items-center justify-center min-h-screen\">\n    <svg\n      className=\"animate-spin -ml-1 mr-3 h-10 w-10 text-gray-700\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      fill=\"none\"\n      viewBox=\"0 0 24 24\"\n    >\n      <circle\n        className=\"opacity-25\"\n        cx=\"12\"\n        cy=\"12\"\n        r=\"10\"\n        stroke=\"currentColor\"\n        strokeWidth=\"4\"\n      ></circle>\n      <path\n        className=\"opacity-75\"\n        fill=\"currentColor\"\n        d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z\"\n      ></path>\n    </svg>\n    <p className=\"text-xl font-semibold text-gray-700\">Loading...</p>\n  </div>\n);\n\nexport const PoolPage: React.FC = () => {\n  const { poolId } = useParams<{ poolId: string }>();\n  const { user } = useAuth();\n  const [standings, setStandings] = useState<Standing[] | null>(null);\n  // const [userSelection, setUserSelection] = useState<UserSelection | null>(null);\n  const [players, setPlayers] = useState<StandingPlayer[]>([]);\n  const [teams, setTeams] = useState<StandingTeam[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const gradientIndex = useSelector((state: RootState) => state.color.gradientIndex);\n\n  useEffect(() => {\n    const fetchPoolData = async () => {\n      if (!user?.id) {\n        // setError(\"User ID is missing. Please log in again.\");\n        return;\n      }\n      try {\n        const standingsResponse = await axios.get(`${process.env.REACT_APP_API_URL}/api/pool/standings/${poolId}`);\n        // const selectionResponse = await axios.get(`${process.env.REACT_APP_API_URL}/api/pool/user-selection/${user.id}/${poolId}`);\n\n        const standingsData: Standing[] = standingsResponse.data;\n        setStandings(standingsData);\n\n        const userStanding = standingsData.find(\n          (standing) => user.id === standing.user.authId\n        );\n\n        if (userStanding) {\n          setPlayers(userStanding.players);\n          setTeams(userStanding.teams);\n        } else {\n          setPlayers([]);\n          setTeams([]);\n        }\n      } catch (err) {\n        if (axios.isAxiosError(err) && err.response) {\n          const errorData = err.response.data;\n          setError(typeof errorData === 'object' ? JSON.stringify(errorData) : errorData);\n        } else {\n          setError('Error fetching pool data');\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (user){\n      fetchPoolData();\n    }  \n  }, [poolId, user]);\n\n  if (loading) return <Loader />;\n  if (error) return <div>Error: {error}</div>;\n\n  const getEmoji = (index: number) => {\n    switch (index) {\n      case 0:\n        return 'ðŸ¥‡';\n      case 1:\n        return 'ðŸ¥ˆ';\n      case 2:\n        return 'ðŸ¥‰';\n      default:\n        return '';\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"md:col-span-2\">\n          <h2 className=\"text-3xl font-bold text-gray-800 mb-4\">Standings</h2>\n          <table className=\"min-w-full bg-white shadow-md rounded-lg overflow-hidden\">\n            {/* <thead className={`bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg`}> */}\n            <thead className={`bg-gradient-to-r ${gradients[gradientIndex]} text-white shadow-lg`}>\n              <tr>\n                <th className=\"py-3 px-4 text-left text-sm font-semibold text-white-700\">Player</th>\n                <th className=\"py-3 px-4 text-left text-sm font-semibold text-white-700\">Points</th>\n              </tr>\n            </thead>\n            <tbody>\n              {standings?.map((standing, index) => (\n                <tr\n                  key={standing.user.id}\n                  className={`hover:bg-gray-100 transition-colors duration-200 slide-in`}\n                >\n                  <td className=\"py-3 px-4 border-b border-gray-200 flex items-center\">\n                    {index < 3 && (\n                      <span className=\"animate-bounce mr-2\">{getEmoji(index)}</span>\n                    )}\n                    <img\n                      // src={user.image}\n                      alt={standing.user.username}\n                      className=\"w-8 h-8 rounded-full mr-2\"\n                    />\n                    {standing.user.username}\n                  </td>\n                  <td className=\"py-3 px-4 border-b border-gray-200\">{standing.score}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n        <div>\n          <h2 className=\"text-3xl font-bold text-gray-800 mb-4\">Your Selection</h2>\n          {(players.length > 0 || teams.length > 0) ? (\n            <div>\n              <h3 className=\"text-xl font-bold text-gray-800\">Teams</h3>\n              <ul className=\"mb-4\">\n                {teams.map((teamObj) => (\n                  <li key={teamObj.team.id} className=\"py-2 px-4 border-b\">\n                    {teamObj.team.name} - {teamObj.score} points\n                  </li>\n                ))}\n              </ul>\n              <h3 className=\"text-xl font-bold text-gray-800\">Players</h3>\n              <ul>\n                {players.map((playerObj) => (\n                  <li key={playerObj.player.id} className=\"py-2 px-4 border-b\">\n                    {playerObj.player.name} - {playerObj.score} points\n                  </li>\n                ))}\n              </ul>\n            </div>\n          ) : (\n            <div>No selection found</div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,SAAS,KAAQ,kBAAkB,CAI5C,OAASC,SAAS,KAAQ,2BAA2B,CACrD,OAASC,OAAO,KAAQ,4BAA4B,CACpD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAS1B,KAAM,CAAAC,MAAgB,CAAGA,CAAA,gBACvBD,KAAA,QAAKE,SAAS,CAAC,wDAAwD,CAAAC,QAAA,eACrEH,KAAA,QACEE,SAAS,CAAC,iDAAiD,CAC3DE,KAAK,CAAC,4BAA4B,CAClCC,IAAI,CAAC,MAAM,CACXC,OAAO,CAAC,WAAW,CAAAH,QAAA,eAEnBL,IAAA,WACEI,SAAS,CAAC,YAAY,CACtBK,EAAE,CAAC,IAAI,CACPC,EAAE,CAAC,IAAI,CACPC,CAAC,CAAC,IAAI,CACNC,MAAM,CAAC,cAAc,CACrBC,WAAW,CAAC,GAAG,CACR,CAAC,cACVb,IAAA,SACEI,SAAS,CAAC,YAAY,CACtBG,IAAI,CAAC,cAAc,CACnBO,CAAC,CAAC,6CAA6C,CAC1C,CAAC,EACL,CAAC,cACNd,IAAA,MAAGI,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,YAAU,CAAG,CAAC,EAC9D,CACN,CAED,MAAO,MAAM,CAAAU,QAAkB,CAAGA,CAAA,GAAM,CACtC,KAAM,CAAEC,MAAO,CAAC,CAAGrB,SAAS,CAAqB,CAAC,CAClD,KAAM,CAAEsB,IAAK,CAAC,CAAGpB,OAAO,CAAC,CAAC,CAC1B,KAAM,CAACqB,SAAS,CAAEC,YAAY,CAAC,CAAG1B,QAAQ,CAAoB,IAAI,CAAC,CACnE;AACA,KAAM,CAAC2B,OAAO,CAAEC,UAAU,CAAC,CAAG5B,QAAQ,CAAmB,EAAE,CAAC,CAC5D,KAAM,CAAC6B,KAAK,CAAEC,QAAQ,CAAC,CAAG9B,QAAQ,CAAiB,EAAE,CAAC,CACtD,KAAM,CAAC+B,OAAO,CAAEC,UAAU,CAAC,CAAGhC,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACiC,KAAK,CAAEC,QAAQ,CAAC,CAAGlC,QAAQ,CAAgB,IAAI,CAAC,CACvD,KAAM,CAAAmC,aAAa,CAAGlC,WAAW,CAAEmC,KAAgB,EAAKA,KAAK,CAACC,KAAK,CAACF,aAAa,CAAC,CAElFpC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAuC,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,EAACd,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEe,EAAE,EAAE,CACb;AACA,OACF,CACA,GAAI,CACF,KAAM,CAAAC,iBAAiB,CAAG,KAAM,CAAAnC,KAAK,CAACoC,GAAG,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,uBAAuBrB,MAAM,EAAE,CAAC,CAC1G;AAEA,KAAM,CAAAsB,aAAyB,CAAGL,iBAAiB,CAACM,IAAI,CACxDpB,YAAY,CAACmB,aAAa,CAAC,CAE3B,KAAM,CAAAE,YAAY,CAAGF,aAAa,CAACG,IAAI,CACpCC,QAAQ,EAAKzB,IAAI,CAACe,EAAE,GAAKU,QAAQ,CAACzB,IAAI,CAAC0B,MAC1C,CAAC,CAED,GAAIH,YAAY,CAAE,CAChBnB,UAAU,CAACmB,YAAY,CAACpB,OAAO,CAAC,CAChCG,QAAQ,CAACiB,YAAY,CAAClB,KAAK,CAAC,CAC9B,CAAC,IAAM,CACLD,UAAU,CAAC,EAAE,CAAC,CACdE,QAAQ,CAAC,EAAE,CAAC,CACd,CACF,CAAE,MAAOqB,GAAG,CAAE,CACZ,GAAI9C,KAAK,CAAC+C,YAAY,CAACD,GAAG,CAAC,EAAIA,GAAG,CAACE,QAAQ,CAAE,CAC3C,KAAM,CAAAC,SAAS,CAAGH,GAAG,CAACE,QAAQ,CAACP,IAAI,CACnCZ,QAAQ,CAAC,MAAO,CAAAoB,SAAS,GAAK,QAAQ,CAAGC,IAAI,CAACC,SAAS,CAACF,SAAS,CAAC,CAAGA,SAAS,CAAC,CACjF,CAAC,IAAM,CACLpB,QAAQ,CAAC,0BAA0B,CAAC,CACtC,CACF,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,GAAIR,IAAI,CAAC,CACPc,aAAa,CAAC,CAAC,CACjB,CACF,CAAC,CAAE,CAACf,MAAM,CAAEC,IAAI,CAAC,CAAC,CAElB,GAAIO,OAAO,CAAE,mBAAOxB,IAAA,CAACG,MAAM,GAAE,CAAC,CAC9B,GAAIuB,KAAK,CAAE,mBAAOxB,KAAA,QAAAG,QAAA,EAAK,SAAO,CAACqB,KAAK,EAAM,CAAC,CAE3C,KAAM,CAAAwB,QAAQ,CAAIC,KAAa,EAAK,CAClC,OAAQA,KAAK,EACX,IAAK,EAAC,CACJ,MAAO,IAAI,CACb,IAAK,EAAC,CACJ,MAAO,IAAI,CACb,IAAK,EAAC,CACJ,MAAO,IAAI,CACb,QACE,MAAO,EAAE,CACb,CACF,CAAC,CAED,mBACEnD,IAAA,QAAKI,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cAC1CH,KAAA,QAAKE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDH,KAAA,QAAKE,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BL,IAAA,OAAII,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,WAAS,CAAI,CAAC,cACpEH,KAAA,UAAOE,SAAS,CAAC,0DAA0D,CAAAC,QAAA,eAEzEL,IAAA,UAAOI,SAAS,CAAE,oBAAoBR,SAAS,CAACgC,aAAa,CAAC,uBAAwB,CAAAvB,QAAA,cACpFH,KAAA,OAAAG,QAAA,eACEL,IAAA,OAAII,SAAS,CAAC,0DAA0D,CAAAC,QAAA,CAAC,QAAM,CAAI,CAAC,cACpFL,IAAA,OAAII,SAAS,CAAC,0DAA0D,CAAAC,QAAA,CAAC,QAAM,CAAI,CAAC,EAClF,CAAC,CACA,CAAC,cACRL,IAAA,UAAAK,QAAA,CACGa,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAEkC,GAAG,CAAC,CAACV,QAAQ,CAAES,KAAK,gBAC9BjD,KAAA,OAEEE,SAAS,CAAE,2DAA4D,CAAAC,QAAA,eAEvEH,KAAA,OAAIE,SAAS,CAAC,sDAAsD,CAAAC,QAAA,EACjE8C,KAAK,CAAG,CAAC,eACRnD,IAAA,SAAMI,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAE6C,QAAQ,CAACC,KAAK,CAAC,CAAO,CAC9D,cACDnD,IAAA,QACE;AACAqD,GAAG,CAAEX,QAAQ,CAACzB,IAAI,CAACqC,QAAS,CAC5BlD,SAAS,CAAC,2BAA2B,CACtC,CAAC,CACDsC,QAAQ,CAACzB,IAAI,CAACqC,QAAQ,EACrB,CAAC,cACLtD,IAAA,OAAII,SAAS,CAAC,oCAAoC,CAAAC,QAAA,CAAEqC,QAAQ,CAACa,KAAK,CAAK,CAAC,GAdnEb,QAAQ,CAACzB,IAAI,CAACe,EAejB,CACL,CAAC,CACG,CAAC,EACH,CAAC,EACL,CAAC,cACN9B,KAAA,QAAAG,QAAA,eACEL,IAAA,OAAII,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,CACvEe,OAAO,CAACoC,MAAM,CAAG,CAAC,EAAIlC,KAAK,CAACkC,MAAM,CAAG,CAAC,cACtCtD,KAAA,QAAAG,QAAA,eACEL,IAAA,OAAII,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAC,OAAK,CAAI,CAAC,cAC1DL,IAAA,OAAII,SAAS,CAAC,MAAM,CAAAC,QAAA,CACjBiB,KAAK,CAAC8B,GAAG,CAAEK,OAAO,eACjBvD,KAAA,OAA0BE,SAAS,CAAC,oBAAoB,CAAAC,QAAA,EACrDoD,OAAO,CAACC,IAAI,CAACC,IAAI,CAAC,KAAG,CAACF,OAAO,CAACF,KAAK,CAAC,SACvC,GAFSE,OAAO,CAACC,IAAI,CAAC1B,EAElB,CACL,CAAC,CACA,CAAC,cACLhC,IAAA,OAAII,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAC,SAAO,CAAI,CAAC,cAC5DL,IAAA,OAAAK,QAAA,CACGe,OAAO,CAACgC,GAAG,CAAEQ,SAAS,eACrB1D,KAAA,OAA8BE,SAAS,CAAC,oBAAoB,CAAAC,QAAA,EACzDuD,SAAS,CAACC,MAAM,CAACF,IAAI,CAAC,KAAG,CAACC,SAAS,CAACL,KAAK,CAAC,SAC7C,GAFSK,SAAS,CAACC,MAAM,CAAC7B,EAEtB,CACL,CAAC,CACA,CAAC,EACF,CAAC,cAENhC,IAAA,QAAAK,QAAA,CAAK,oBAAkB,CAAK,CAC7B,EACE,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}