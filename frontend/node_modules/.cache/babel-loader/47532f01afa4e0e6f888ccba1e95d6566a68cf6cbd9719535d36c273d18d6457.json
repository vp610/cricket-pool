{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate,useParams}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProfilePage=()=>{const{authId}=useParams();const[user,setUser]=useState();// Replace with actual user data\nconst[name,setName]=useState('');const[image,setImage]=useState('');const navigate=useNavigate();const[loading,setLoading]=useState(false);const[error,setError]=useState(null);useEffect(()=>{if(!authId){setError('authId is undefined');return;}// Fetch user data from the backend\nconst fetchUser=async()=>{try{const response=await axios.get(`${process.env.REACT_APP_API_URL}/api/profile/${authId}`);setUser(response.data);}catch(err){if(axios.isAxiosError(err)&&err.response){setError(err.response.data);}else{setError('Error fetching user');}}};fetchUser();},[authId]);const handleNameChange=e=>{setName(e.target.value);};const handleImageChange=e=>{if(e.target.files&&e.target.files[0]){const reader=new FileReader();reader.onload=event=>{if(event.target&&event.target.result){setImage(event.target.result);}};reader.readAsDataURL(e.target.files[0]);}};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError(null);try{// Update user data in the backend\nconst response=await fetch(`${process.env.REACT_APP_API_URL}/api/profile/update/${user===null||user===void 0?void 0:user.id}`,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:name})});if(!response.ok){throw new Error('Failed to update profile');}const updatedUser=await response.json();setUser(updatedUser);// Simulate successful update\nsetTimeout(()=>{if(user){setUser({...user,username:name});}setLoading(false);},1000);setTimeout(()=>{navigate(`/`);},1000);}catch(error){if(error instanceof Error){setError(error.message);}else{setError('An unknown error occurred');}setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto bg-white shadow-md rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-800 mb-4\",children:\"Profile\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",defaultValue:user===null||user===void 0?void 0:user.username,onChange:handleNameChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"image\",children:\"Profile Picture\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"image\",accept:\"image/*\",onChange:handleImageChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"}),image&&/*#__PURE__*/_jsx(\"img\",{src:image,alt:\"Profile\",className:\"mt-4 w-32 h-32 rounded-full object-cover\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",value:user===null||user===void 0?void 0:user.email,readOnly:true,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100 cursor-not-allowed\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs italic mb-4\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"text-sm text-gray-600 hover:underline\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:shadow-outline\",disabled:loading,children:loading?'Updating...':'Update Profile'})})})]})]})});};export default ProfilePage;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useParams","axios","jsx","_jsx","jsxs","_jsxs","ProfilePage","authId","user","setUser","name","setName","image","setImage","navigate","loading","setLoading","error","setError","fetchUser","response","get","process","env","REACT_APP_API_URL","data","err","isAxiosError","handleNameChange","e","target","value","handleImageChange","files","reader","FileReader","onload","event","result","readAsDataURL","handleSubmit","preventDefault","fetch","id","method","headers","body","JSON","stringify","username","ok","Error","updatedUser","json","setTimeout","message","className","children","onSubmit","htmlFor","type","defaultValue","onChange","accept","src","alt","email","readOnly","href","disabled"],"sources":["/Users/Vaidik/Desktop/fantasyPool/frontend/src/components/Profile/ProfilePage.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { User } from '../../types';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport axios from 'axios';\n\nconst ProfilePage: React.FC = () => {\n  const { authId } = useParams<{ authId: string }>();\n  const [user, setUser] = useState<User>(); // Replace with actual user data\n  const [name, setName] = useState('');\n  const [image, setImage] = useState('');\n  const navigate = useNavigate();\n  \n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!authId) {\n      setError('authId is undefined');\n      return;\n    }\n    // Fetch user data from the backend\n    const fetchUser = async () => {\n      try {\n        const response = await axios.get(`${process.env.REACT_APP_API_URL}/api/profile/${authId}`);\n        setUser(response.data);\n      } catch (err) {\n          if (axios.isAxiosError(err as any) && (err as any).response) {\n            setError((err as any).response.data);\n          } else {\n            setError('Error fetching user');\n          }\n      }\n    };\n    fetchUser();\n  }, [ authId ]);\n\n  const handleNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setName(e.target.value);\n  };\n\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        if (event.target && event.target.result) {\n          setImage(event.target.result as string);\n        }\n      };\n      reader.readAsDataURL(e.target.files[0]);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Update user data in the backend\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/profile/update/${user?.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ username: name }),\n      });\n      if (!response.ok) {\n        throw new Error('Failed to update profile');\n      }\n      const updatedUser = await response.json();\n      setUser(updatedUser);\n\n      // Simulate successful update\n      setTimeout(() => {\n        if (user) {\n          setUser({ ...user, username: name });\n        }\n        setLoading(false);\n      }, 1000);\n      setTimeout(() => {\n        navigate(`/`);\n      }, 1000);\n    } catch (error) {\n      if (error instanceof Error) {\n        setError(error.message);\n      } else {\n        setError('An unknown error occurred');\n      }\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"max-w-md mx-auto bg-white shadow-md rounded-lg p-6\">\n        <h2 className=\"text-3xl font-bold text-gray-800 mb-4\">Profile</h2>\n        <form onSubmit={handleSubmit}>\n          <div className=\"mb-4\">\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"name\">\n              Name\n            </label>\n            <input\n              type=\"text\"\n              id=\"name\"\n              defaultValue={user?.username}\n              \n              onChange={handleNameChange}\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n            />\n          </div>\n          <div className=\"mb-4\">\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"image\">\n              Profile Picture\n            </label>\n            <input\n              type=\"file\"\n              id=\"image\"\n              accept=\"image/*\"\n              onChange={handleImageChange}\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n            />\n            {image && (\n              <img src={image} alt=\"Profile\" className=\"mt-4 w-32 h-32 rounded-full object-cover\" />\n            )}\n          </div>\n          <div className=\"mb-4\">\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"email\">\n              Email\n            </label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              value={user?.email}\n              readOnly\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100 cursor-not-allowed\"\n            />\n          </div>\n          {error && <p className=\"text-red-500 text-xs italic mb-4\">{error}</p>}\n          <div className=\"flex items-center justify-between\">\n            <a\n              href=\"/\"\n              className=\"text-sm text-gray-600 hover:underline\"\n              >\n                <button\n                  type=\"submit\"\n                  className=\"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:shadow-outline\"\n                  disabled={loading}\n                >{loading ? 'Updating...' : 'Update Profile'}\n                </button>\n            </a>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default ProfilePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}